<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../../assets/css/style.css" />
    <link
      rel="shortcut icon"
      href="../../assets/favicon/favicon.png"
      type="image/x-icon"
    />
    <title>Triggers</title>
  </head>
  <body>
    <div class="floating-div">
      <header>
        <div class="btn">
          <a
            href="../074_evnironment_variables/074_evnironment_variables.html"
            class="previous"
          >
            &laquo; Previous
          </a>
        </div>
        <div class="title">
          <h1>Triggers</h1>
        </div>
        <div class="btn">
          <!-- <a href="" class="next">Next &raquo;</a> -->
        </div>
      </header>
    </div>
    <main>
      <section>
        <div class="row">
          <div class="left-col">
            <p>
              Workflows can be triggered with different events. These events can
              be any GitHub event: push, pull-requests opened or closed,
              comments, etc. Triggers must be specified with the
              <em>on</em> keyword of the yaml file. We can pass a single value:
            </p>
          </div>
          <div class="right-col">
            <img
              src="075_triggers_01.png"
              alt="Triggers 1"
              height="100px"
              class="github-img"
            />
          </div>
        </div>
        <div class="row">
          <div class="left-col">
            <img
              src="075_triggers_02.png"
              alt="Triggers 2"
              height="100px"
              class="github-img"
            />
          </div>
          <div class="right-col">
            <p>
              If we want the same workflow to trigger on different events we can
              pass an array of GitHub events to the <em>on</em> keyword. The
              workflow will then trigger whenever at least one of the triggers
              is met.
            </p>
          </div>
        </div>
        <div class="row">
          <div class="left-col">
            <p>
              Some events have <em>activity types</em>. To use the activities
              the value that we pass to the <em>on</em> keyword must be an
              object. Each attribute in this object must be itself an object
              named after a valid GitHub event (like push, pull_request, etc).
              Inside each of these object we can define the <em>types</em> key
              and pass to it an array of event activity types on which the
              workflow should trigger.
            </p>
            <br />
            <p>
              Events that have activity types will have some of those set by
              default. For example, if we trigger a workflow
              <span class="inline-code">on: pull_request</span>, the workflow
              will be triggered on <em>opened</em>, <em>synchronized</em>, or
              <em>reopened</em> by default.
            </p>
          </div>
          <div class="right-col">
            <img
              src="075_triggers_03.png"
              alt="Triggers 3"
              width="350px"
              class="github-img"
            />
          </div>
        </div>
        <div class="row">
          <div class="single-col">
            <p>
              The complete list of events and activity types can be found
              <a
                class="here"
                href="https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows"
                >here</a
              >.
            </p>
          </div>
        </div>
        <div class="example"></div>
        <div class="row">
          <div class="left-col">
            <p>
              To trigger workflows on a certain schedule we can use
              <em>cron jobs</em> scheduling. Scheduling needs to be added by
              passing the <em>schedule</em> value to the <em>on</em> key. This
              should be an array. Each element of the array needs to contain an
              object with the key <em>cron</em>. The value of this key needs to
              be a string representing a cron expression. You can use
              <a href="https://crontab.guru/" class="here">crontab guru</a> to
              create cron expressions.
            </p>
          </div>
          <div class="right-col">
            <img
              src="075_triggers_04.png"
              alt="Triggers 4"
              width="400px"
              class="github-img"
            />
          </div>
        </div>
        <div class="example"></div>
        <div class="row">
          <div class="left-col">
            <img
              src="075_triggers_05.png"
              alt="Triggers 5"
              class="vscode-img"
            />
            <br />
            <img
              src="075_triggers_06.png"
              alt="Triggers 6"
              class="vscode-img"
            />
          </div>
          <div class="right-col">
            <p>
              We can also trigger workflows on external events. To do so we need
              to use the <em>repository_dispatch</em> value, and specify which
              activity types should trigger the workflow.
            </p>
            <br />
            <p>These dispatch requests need to come to the API endpoint</p>
            <div class="code">
              http://api.github/repos/<em>user_name</em>/<em>repo_name</em>/dispatches
            </div>
            <p>
              They need to be <em>POST</em> requests with the
              <span class="inline-code">HEADERS</span>
              <em>Accept: application/vmd.github.everest-preview+json</em>, and
              <em>Content-Type: application/json</em>. The body of the request
              needs to be a JSON object with an <em>event_type</em> that matches
              at least one activity type for that trigger.
            </p>
          </div>
        </div>
      </section>
    </main>
    <footer>
      <a class="go-home" href="../../index.html"><i class="fas fa-home"></i></a>
    </footer>
    <script
      src="https://kit.fontawesome.com/994cc6cf8e.js"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
